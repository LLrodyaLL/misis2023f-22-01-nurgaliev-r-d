### Нургалиев Родион БПМ_22_1
### СУБД - «ключ-значение» (key-value store)

## **Введение**

База данных «key-value» – это тип, относящийся к семейству нереляционных баз данных NoSQL, в которой для хранения данных используется простой метод «ключ значение». Это дает возможность хранить данные как совокупность пар «ключ значение», в которых ключ служит уникальным идентификатором. [1.]

Ключи и значения фиксируются в виде простой или составной информации. [2.]

В хранилищах «ключ-значение» нет языка запросов, но они предоставляют возможность добавлять и удалять пары «ключ-значение». Значения не могут быть запрошены или найдены. Запросить можно только ключ. [3.]

Рис.1 Пример БД «key-value»
![Image alt](https://github.com/LLrodyaLL/misis2023f-22-01-nurgaliev-r-d/raw/main/docs/KV.png)

## **Методы хранения**

- **Хеш-таблицы:** Многие реализации баз данных "ключ-значение" используют хеш-таблицы для хранения данных. Ключи хешируются, и полученный хеш используется для быстрого поиска соответствующего значения.
- Горизонтальное масштабирование позволяет распределить данные по различным узлам, а каждый узел может использовать свои собственные хеш-таблицы для обработки локальных данных. [3.]

![Image alt](https://github.com/LLrodyaLL/misis2023f-22-01-nurgaliev-r-d/raw/main/docs/hash.jpg)

- **B-деревья:** Некоторые системы используют B-деревья для управления данными. Данные организованы в виде дерева, где каждый узел содержит набор ключей и указатели на дочерние узлы.
- Каждый узел в системе, который отвечает за свой собственный поднабор данных, может использовать B-деревья для эффективной организации индексов ключей. Каждое поддерево B-дерева будет соответствовать некоторой части диапазона ключей в распределенной системе.

![Image alt](https://github.com/LLrodyaLL/misis2023f-22-01-nurgaliev-r-d/raw/main/docs/b-tree.jpg)

## **Преимущества**

- Не требуется нормализация.
- Базам данных «ключ-значение» нет необходимости выполнять ресурсоемкое объединение таблиц, поэтому возможно разместить всю необходимую информацию в одной таблице. [1.]
- Поскольку между записями в БД «ключ-значение» нет жёсткой связи, данные можно дробить и хранить на нескольких независимых серверах. Горизонтальное масштабирование легче и дешевле, чем вертикальное. [2.]
- Хранилища «ключ-значение» предлагают встроенную поддержку репликации путем автоматического копирования данных между несколькими узлами хранения. Это помогает автоматически восстанавливать данные – в случае сбоя сервера данные останутся в вашем распоряжении. [1.]
-	Расширенные базы данных «ключ-значение» обеспечивают встроенную поддержку принципа ACID на стороне сервера. Благодаря этому разработчики могут вносить изменения в большое число элементов в пределах одной или нескольких таблиц. [1.]
- В хранилищах «ключ-значение» можно сортировать ключи, чтобы систематизировать данные и разбивать их на разделы. Например, ключи можно отсортировать следующими образами:
  - В алфавитном или цифровом порядке.
  - Хронологически.
  - По размеру данных. [1.]

## **Недостатки**

- Отсутствие Языка Запросов, что может усложнить выполнение более сложных операций. [1.]

## **Варианты применения**

1. **Кеширование результатов вычислений**

Библиотека C++ должна поддерживать кэширование результатов функций. При каждом вызове функции библиотеки проверяем, есть ли соответствующий результат в кэше по ключу. Если результат найден, он возвращается немедленно, иначе выполняется вычисление и результат сохраняется в кэш.
   - **Преимущества:** горизонтальное масштабирование, возможность управлять временем жизни кэша, удалять устаревшие записи.
   - **Недостаток:** Отсутствие сложных запросов может быть ограничением при необходимости выполнения сложных операций фильтрации или агрегации данных.

2. **Хранение данных о пользователе в  приложении социальной сети**

Ключом будет выступать идентификационный номер пользователя, а значением будет дата и время последнего посещения. 
   - **Преимущества:** горизонтальное масштабирование, возможность репликации и последующего восстановления даты и времени посещения при их утере.
   - **Недостатки:** Невозможность составления сложного запроса, например, для поиска пользователей с определенными последовательностями цифр в id.

![Image alt](https://github.com/LLrodyaLL/misis2023f-22-01-nurgaliev-r-d/raw/main/docs/id_time.jpg)

## **Примеры СУБД key-value**

1. Redis
2. Memcached

## **Управление**

- Не поддерживают сложные запросы, поэтому в основном используются простые термины, такие как `get`, `set` и `delete`.
- Пример:
```c++
// Чтение данных
auto reply = client.get("ключ");
if (reply.is_string()) {
  std::cout << "Значение: " << reply.as_string() << std::endl;
}

// Запись данных (put, аналог set)
client.set("ключ", "значение");

// Удаление данных
client.del("ключ");
```

## **Источники**

- AWS, “What Is a Key-Value Database?”
[https://aws.amazon.com/ru/nosql/key-value/](https://aws.amazon.com/ru/nosql/key-value/)
- Yandex Cloud, “NoSQL: виды, особенности и применение”
[https://cloud.yandex.ru/ru/blog/posts/2022/10/nosql](https://cloud.yandex.ru/ru/blog/posts/2022/10/nosql)
- Redis, “What is a key-value Database?”
[https://redis.com/nosql/key-value-databases/](https://redis.com/nosql/key-value-databases/)
